# תרשים זרימה ASCII - מערכת ניהול תורים למרפאות

## תרשים זרימה פשוט

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   משתמש נכנס    │───▶│  רואה ווידג'ט   │───▶│ בוחר רופא ומרפאה │
│     לאתר        │    │     תורים      │    │                │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                                       │
                                                       ▼
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│  מקבל אישור     │◀───│   מזמין תור     │◀───│ רואה תאריכים   │
│    הזמנה        │    │                │    │   זמינים       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

## תרשים זרימת נתונים

```
משתמש ──┐
         │
         ▼
    ווידג'ט Elementor ──┐
         │              │
         ▼              │
    בקשת AJAX ──────────┘
         │
         ▼
    API Manager ──┐
         │       │
         ▼       │
    בדיקת Cache ─┘
         │
         ▼
    בסיס נתונים ──┐
         │       │
         ▼       │
    החזרת נתונים ─┘
         │
         ▼
    הצגת תורים למשתמש
```

## תרשים מבנה המערכת

```
┌─────────────────────────────────────────────────────────────┐
│                    WordPress Environment                    │
├─────────────────────────────────────────────────────────────┤
│  WordPress Core  │  Elementor  │  Database  │  Cron System  │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    Plugin Architecture                      │
├─────────────────────────────────────────────────────────────┤
│  Entry Point  │  Core System  │  Admin Interface  │  Frontend │
│               │               │                   │          │
│  Main Plugin  │  Plugin Core  │  Dashboard        │  Widget  │
│  File         │  DB Manager   │  Calendars        │  Shortcode│
│               │  API Manager  │  Sync Status      │  Fields  │
│               │  Appt Manager │  Cron Jobs        │  Manager │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                      Data Layer                             │
├─────────────────────────────────────────────────────────────┤
│  Custom Tables  │  Cache System  │  Mock Data  │  External API │
│                 │                │             │              │
│  Calendars      │  Memory Cache  │  JSON File  │  Future API   │
│  Dates          │  DB Cache      │  Test Data  │  Integration  │
│  Times          │  File Cache    │  Demo Data  │  Real Data    │
└─────────────────────────────────────────────────────────────┘
```

## תרשים זרימת משתמש

```
┌─────────────────┐
│   משתמש נכנס    │
│     לאתר        │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  רואה ווידג'ט   │
│     תורים      │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ בוחר רופא ומרפאה │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ רואה תאריכים   │
│   זמינים       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ בוחר תאריך ושעה │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│   מזמין תור     │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│  מקבל אישור     │
│    הזמנה        │
└─────────────────┘
```

## תרשים זרימת ניהול

```
┌─────────────────┐
│   מנהל נכנס     │
│  לממשק ניהול    │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│   רואה דשבורד   │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ מנהל לוחות שנה  │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ עוקב אחר סנכרון │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ מגדיר משימות    │
│   אוטומטיות     │
└─────────────────┘
```

## תרשים זרימת סנכרון

```
┌─────────────────┐
│  התחלת סנכרון   │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ בדיקת צורך      │
│   בסנכרון       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ קבלת נתונים     │
│   מ-API         │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ אימות ועיבוד   │
│     נתונים      │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ עדכון בסיס      │
│    נתונים       │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ עדכון Cache     │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│ רישום סטטוס     │
│   סנכרון        │
└─────────────────┘
```

## תרשים מבנה בסיס נתונים

```
┌─────────────────────────────────────────────────────────────┐
│                    Database Structure                       │
├─────────────────────────────────────────────────────────────┤
│  wp_clinic_queue_calendars                                  │
│  ├── id (Primary Key)                                       │
│  ├── doctor_id                                             │
│  ├── clinic_id                                             │
│  ├── treatment_type                                        │
│  ├── calendar_name                                         │
│  ├── last_updated                                          │
│  └── created_at                                            │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│  wp_clinic_queue_dates                                      │
│  ├── id (Primary Key)                                       │
│  ├── calendar_id (Foreign Key)                             │
│  ├── appointment_date                                       │
│  └── created_at                                            │
└─────────────────────────────────────────────────────────────┘
                                │
                                ▼
┌─────────────────────────────────────────────────────────────┐
│  wp_clinic_queue_times                                      │
│  ├── id (Primary Key)                                       │
│  ├── date_id (Foreign Key)                                 │
│  ├── time_slot                                             │
│  ├── is_booked                                             │
│  ├── patient_name                                          │
│  ├── patient_phone                                         │
│  ├── notes                                                 │
│  ├── created_at                                            │
│  └── updated_at                                            │
└─────────────────────────────────────────────────────────────┘
```

## סיכום זרימת המערכת

### 1. אתחול המערכת
```
WordPress → Plugin Loading → Database Creation → Mock Data Loading → AJAX Registration
```

### 2. זרימת משתמש
```
User → Widget → AJAX Request → API Manager → Database → Response → Display
```

### 3. זרימת ניהול
```
Admin → Dashboard → Calendar Management → Sync Status → Cron Jobs
```

### 4. זרימת סנכרון
```
Cron Trigger → API Check → Data Fetch → Validation → Database Update → Cache Update
```

### 5. זרימת ביצועים
```
Request → Cache Check → Data Processing → Response → Performance Monitoring
```

## תכונות עיקריות

### 1. ממשק משתמש
- **ווידג'ט Elementor** - גרירה ושחרור
- **Shortcode** - הטמעה בעמודים
- **תמיכה בעברית** - RTL מלא
- **עיצוב רספונסיבי** - מותאם למובייל

### 2. ממשק ניהול
- **דשבורד** - סטטיסטיקות כלליות
- **ניהול לוחות שנה** - הוספה, עריכה, מחיקה
- **סטטוס סנכרון** - מעקב אחר עדכונים
- **משימות אוטומטיות** - הגדרת Cron Jobs

### 3. ביצועים
- **מערכת Cache** - 30 דקות
- **ניקוי אוטומטי** - נתונים ישנים
- **סנכרון תקופתי** - עדכון אוטומטי
- **ניטור ביצועים** - מעקב אחר מדדים

### 4. אבטחה
- **בדיקת הרשאות** - משתמשים מורשים
- **אימות נתונים** - בדיקת תקינות
- **הגנה מפני התקפות** - CSRF, XSS, SQL Injection
- **לוגים** - מעקב אחר פעולות

המערכת מספקת פתרון מקיף לניהול תורים במרפאות עם ארכיטקטורה מודולרית, ממשק משתמש אינטואיטיבי, ותמיכה מלאה בעברית.


